import{g as m}from"./getaxios.1d8b7a65.js";import{_ as f}from"./index.be6e309c.js";import{r as p,o as g,c as h,a as l,w as r,j as y,k as u,t as c}from"./vendor.ae7442e4.js";const w={data:function(){return{email:"",sendCode:"",password:null,confirmPassword:"",lang:"",sign:"",time:""}},created:function(){this.lang=this.$cookies.get("lang"),this.$store.commit("lang/setAllTranslation",this.$cookies.get("lang")),this.keyupForget()},computed:{myTranslation:function(){return this.$store.state.lang.allTranslation.forget}},methods:{keyupForget:function(){document.onkeydown=e=>{window.event.keyCode===13&&this.confirm()}},sendForgetEmail:function(){let e=this,t=new FormData;t.append("email",this.email),t.append("lang",this.lang),m("http://api.1xch.one/index.php?c=user&a=forgot","post",t).then(a=>{let s=a.data;if(s.code!==0){e.$notify.error({title:s.msg,msg:s.msg});return}e.$message({showClose:!0,message:s.msg+`
`+e.myTranslation.attention,center:!0,offset:300}),e.sign=s.sql.split("&sign=")[1].split("<")[0].split('">')[0],e.time=s.sql.split("&time=")[1].split("&sign=")[0]}).catch(a=>{e.$notify.error({title:a,message:a})})},confirm:function(){if(this.password!==this.confirmPassword){this.$notify.error({title:"Error!",message:this.myTranslation.warn1});return}if(this.password===""||this.confirmPassword===""){this.$notify.error({title:"Error!",message:this.myTranslation.warn2});return}let e=this,t=new FormData;t.append("lang",this.lang),t.append("password",this.password),t.append("email",this.email),t.append("time",this.time),t.append("sign",this.sendCode),m("http://api.1xch.one/index.php?c=user&a=reset","post",t).then(a=>{let s=a.data;if(s.code!==0){e.$notify.error({title:s.msg,message:s.msg});return}e.$notify.success({title:"Success!!!",message:"\u90AE\u7BB1\u5BC6\u7801\u66F4\u6539\u6210\u529F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55\uFF01"}),e.$router.push("/login")}).catch(a=>{e.$notify.error({title:a,message:a})})}}},_={class:"input-div"},k={style:{"margin-top":"20px"}};function v(e,t,a,s,V,n){const i=p("el-input"),d=p("el-button");return g(),h("div",_,[l(i,{class:"input-style",modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=o=>e.email=o),placeholder:n.myTranslation.email},null,8,["modelValue","placeholder"]),l(i,{class:"input-style",modelValue:e.sendCode,"onUpdate:modelValue":t[1]||(t[1]=o=>e.sendCode=o),placeholder:n.myTranslation.verifyCode},{append:r(()=>[l(d,{style:{width:"100px"},type:"text",onClick:n.sendForgetEmail},{default:r(()=>[u(c(n.myTranslation.sendCode),1)]),_:1},8,["onClick"])]),_:1},8,["modelValue","placeholder"]),l(i,{class:"input-style",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=o=>e.password=o),placeholder:n.myTranslation.password,"show-password":""},null,8,["modelValue","placeholder"]),l(i,{class:"input-style",modelValue:e.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=o=>e.confirmPassword=o),placeholder:n.myTranslation.confirmPass,"show-password":""},null,8,["modelValue","placeholder"]),y("div",k,[l(d,{onClick:n.confirm,class:"confirm-button"},{default:r(()=>[u(c(n.myTranslation.button),1)]),_:1},8,["onClick"])])])}var $=f(w,[["render",v],["__scopeId","data-v-260c960a"]]);export{$ as default};
