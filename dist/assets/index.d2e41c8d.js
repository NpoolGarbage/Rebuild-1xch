import{i as _,E as i,r as p,o as f,c as k,j as l,a,w as c,t as r,k as u}from"./vendor.ae7442e4.js";import{g as y}from"./getaxios.1d8b7a65.js";import{_ as w}from"./index.dda3569b.js";const x={data:function(){return{email:"",password:"",lang:"",tokenid:""}},created:function(){var e=this.$cookies.get("lang");(e===null||e===""||e===void 0)&&this.$cookies.set("lang","en"),this.lang=this.$cookies.get("lang"),this.$store.commit("lang/setAllTranslation",this.lang),this.keyupLogin()},computed:{myTranslation:function(){return this.$store.state.lang.allTranslation.login}},methods:{keyupLogin:function(){document.onkeydown=e=>{window.event.keyCode===13&&this.login()}},login:function(){let e=new FormData,t=this;e.append("email",this.email),e.append("password",this.password),e.append("lang",this.lang),_({url:"http://api.1xch.one/index.php?c=user&a=login",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(function(n){let o=n.data;if(o.code!==0){i.error({title:o.msg,message:o.msg});return}t.tokenid=o.tokenid,t.getUserInfo(),t.$cookies.set("tokenid",o.tokenid),t.$router.push({path:"/main/power/myorder"})}).catch(n=>{i.error({title:n,message:n})})},getUserInfo:function(){let e=this,t=new FormData;t.append("tokenid",this.tokenid),t.append("lang",this.lang),y("http://api.1xch.one/index.php?c=user&a=user_info","post",t).then(n=>{let o=n.data;if(o.code!==0){i.error({title:o.msg,message:o.msg});return}e.$store.commit("user/setUserInfo",o)}).catch(n=>{i.error({title:n,message:n})})}}},v={class:"login-style"},T={class:"input-div"},V={style:{"padding-top":"10px"}},b={style:{"margin-top":"20px"}},C={style:{color:"white"}};function I(e,t,n,o,U,s){const m=p("el-input"),g=p("router-link"),h=p("el-button");return f(),k("div",v,[l("div",T,[a(m,{class:"input-style",modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=d=>e.email=d),placeholder:s.myTranslation.emailInput},null,8,["modelValue","placeholder"]),a(m,{class:"input-style",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=d=>e.password=d),placeholder:s.myTranslation.passwordInput,"show-password":""},null,8,["modelValue","placeholder"])]),a(g,{class:"forgot-password",to:"/forget"},{default:c(()=>[u(r(s.myTranslation.forget),1)]),_:1}),l("div",V,[a(h,{onClick:s.login,class:"login-button"},{default:c(()=>[u(r(s.myTranslation.button),1)]),_:1},8,["onClick"])]),l("div",b,[l("span",C,r(s.myTranslation.tip),1),a(g,{to:"/register",class:"register-font"},{default:c(()=>[u(r(s.myTranslation.register),1)]),_:1})])])}var B=w(x,[["render",I],["__scopeId","data-v-2d0261ae"]]);export{B as default};
